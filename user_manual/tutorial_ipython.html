


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Exploring Chaco with IPython &mdash; chaco 4.6.0-dev documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.6.0-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/et.ico"/>
    <link rel="top" title="chaco 4.6.0-dev documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="../index.html">chaco 4.6.0-dev documentation</a> &raquo;</li>
  
    <li><a href="#">Exploring Chaco with IPython</a></li>
  

      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="exploring-chaco-with-ipython">
<span id="tutorial-ipython"></span><h1>Exploring Chaco with IPython<a class="headerlink" href="#exploring-chaco-with-ipython" title="Permalink to this headline">¶</a></h1>
<p>Chaco has an interactive plotting mode similar to, but currently more limited
than matplotlib&#8217;s.  This plotting mode is also available as an Envisage plugin,
and so can be made available within end-user applications that feature an
Envisage-based Python prompt.</p>
<div class="section" id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>To get started, you need to run iPython with the <tt class="docutils literal"><span class="pre">--gui=wx</span></tt> option enabled,
so that the iPython and wx event loops interact correctly <a class="footnote-reference" href="#guiqt" id="id1">[1]</a></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ipython</span> <span class="o">--</span><span class="n">gui</span><span class="o">=</span><span class="n">wx</span>
</pre></div>
</div>
<p>You could instead start in <tt class="docutils literal"><span class="pre">-pylab</span></tt> mode if you prefer, which has the advantage of
pre-loading numpy and some other useful libraries.
Once you have the iPython prompt, you can accesss the Chaco shell mode commands
via:</p>
<div class="highlight-python"><pre>In [1]: from chaco.shell import *</pre>
</div>
<p>We&#8217;ll start by creating some data that we want to plot:</p>
<div class="highlight-python"><pre>In [2]: from numpy import *
In [3]: x = linspace(-2*pi,2*pi, 100)
In [4]: y = sin(x)
In [5]: plot(x, y)</pre>
</div>
<img alt="../_images/ipython_basic.png" src="../_images/ipython_basic.png" />
<p>If you experiment with the plot, you&#8217;ll see that it has the standard
Chaco pan and zoom tools enabled.  As with Matplotlib, you can specify
options for the display of the plot as additional arguments and keyword
arguments to the plot command.  The most important of these is is the
format string argument, which resembles the Matplotlib format strings:</p>
<div class="highlight-python"><pre>In [6]: plot(x, y, 'g:')</pre>
</div>
<p>This creates a green, dotted line plot of the data.  You could instead
create a red scatter plot of the data with circles for markers using:</p>
<div class="highlight-python"><pre>In [7]: plot(x, y, 'ro')</pre>
</div>
<p>You&#8217;ll notice that each of these plot commands replaces the current plot
with the new plot.  If you want to overlay the plots, you need to instruct
Chaco to <tt class="docutils literal"><span class="pre">hold()</span></tt> the plots:</p>
<div class="highlight-python"><pre>In [8]: hold()
In [9]: plot(x, cos(x), 'b-')
In [10]: plot(x, sin(2*x), 'y^')</pre>
</div>
<img alt="../_images/ipython_multi.png" src="../_images/ipython_multi.png" />
<p>Calling <tt class="docutils literal"><span class="pre">hold()</span></tt> again will toggle back to the previous
behaviour:</p>
<div class="highlight-python"><pre>In [11]: hold()</pre>
</div>
<p>You can also plot multiple curves with one plot command.  The following
single plot call is equivalent to the above three:</p>
<div class="highlight-python"><pre>In [12]: plot(x, y, 'ro', x, cos(x), 'b-', x, sin(2*x), 'y^')</pre>
</div>
</div>
<div class="section" id="types-of-plots">
<h2>Types of Plots<a class="headerlink" href="#types-of-plots" title="Permalink to this headline">¶</a></h2>
<p>The Chaco shell interface supports a subset of the standard Chaco plots.
You can do line, scatter, image, pseudocolor, and contour plots.</p>
<p>To illustrate some of these different plot types, let&#8217;s create a couple
of 2D gaussians and plot them:</p>
<div class="highlight-python"><pre>In [13]: x1 = random.normal(-0.5, 1., 100)
In [14]: y1 = random.normal(-1.25, 0.5, 100)
In [15]: x2 = random.normal(0 ,0.25, 50)
In [16]: y2 = random.normal(0, 0.5, 50)
In [17]: plot(x1, y1, 'ro', x2, y2, 'go')</pre>
</div>
<p>We&#8217;ll now create a kernel density estimator for the combined data set,
and plot that:</p>
<div class="highlight-python"><pre>In [18]: x = concatenate((x1, x2))
In [19]: y = concatenate((y1, y2))
In [20]: dataset = array([x, y])
In [21]: import scipy.stats
In [22]: kde = scipy.stats.gaussian_kde(dataset)</pre>
</div>
<p>Now that we have the distribution, we sample it at a bunch of points on a grid:</p>
<div class="highlight-python"><pre>In [23]: xs = linspace(-4, 4, 100)
In [24]: ys = linspace(-4, 4, 100)
In [25]: xpoints, ypoints = meshgrid(xs, ys)
In [26]: points = array([xpoints.flatten(), ypoints.flatten()])
In [27]: z = kde(points)
In [28]: z.shape = (100, 100)</pre>
</div>
<p>Finally, we can plot the contours.  For grid-based plots like contours and images,
we need to supply the x- and y-coordinates of the edges of the pixels, rather than
the centers:</p>
<div class="highlight-python"><pre>In [29]: xedges = linspace(-4.06125, 4.06125, 101)
In [30]: yedges = linspace(-4.06125, 4.06125, 101)
In [31]: hold()
In [32]: contour(xedges, yedges, z)</pre>
</div>
<img alt="../_images/ipython_kde.png" src="../_images/ipython_kde.png" />
<p>Other related plotting commands which are available include <tt class="docutils literal"><span class="pre">imshow()</span></tt>, <tt class="docutils literal"><span class="pre">contourf()</span></tt>
and <tt class="docutils literal"><span class="pre">pshow()</span></tt>.  For example:</p>
<div class="highlight-python"><pre>In [33]: pshow(xedges, yedges, z)</pre>
</div>
<p>will plot a pseudo-color image of our sampling of the KDE.</p>
</div>
<div class="section" id="making-things-pretty">
<h2>Making Things Pretty<a class="headerlink" href="#making-things-pretty" title="Permalink to this headline">¶</a></h2>
<p>You can add plot and axis titles to your plot easily:</p>
<div class="highlight-python"><pre>In [34]: title('The Kernel Density Estimator')
In [35]: xtitle('x')
In [36]: ytitle('y')</pre>
</div>
<p>and you can toggle whether or not grids are drawn by:</p>
<div class="highlight-python"><pre>In [37]: xgrid()
In [38]: ygrid()</pre>
</div>
<p>and similarly:</p>
<div class="highlight-python"><pre>In [39]: legend()</pre>
</div>
<p>toggles the display of the legend.  These toggling commands can optionally take a
boolean value which instead of toggling the display will either always show or hide
the grid or legend.  For example:</p>
<div class="highlight-python"><pre>In [40]: legend(False)</pre>
</div>
<p>will ensure that the legend is hidden.  You can toggle the axes completely with:</p>
<div class="highlight-python"><pre>In [41]: xaxis()
In [42]: yaxis()</pre>
</div>
<p>but you can additionally gain quite fine-grained control over display of the axes
by passing keyword arguments to these commands.  For example, to display the y-axis
on the right instead of the left, you would do:</p>
<div class="highlight-python"><pre>In [43]: yaxis(orientation='right')</pre>
</div>
<p>You can see the complete set of available keyword arguments via ipython&#8217;s help:</p>
<div class="highlight-python"><pre>In [44]: yaxis?
Base Class:       &lt;type 'function'&gt;
String Form:   &lt;function yaxis at 0x1e4e25f0&gt;
Namespace:        Interactive
File:             /Users/cwebster/src/ets/chaco/enthought/chaco/shell/commands.py
Definition:       yaxis(**kwds)
Docstring:
    Configures the y-axis.

    Usage
    -----
    * ``yaxis()``: toggles the vertical axis on or off.
    * ``yaxis(**kwds)``: set parameters of the vertical axis.

    Parameters
    ----------
    title : str
        The text of the title
    title_font : KivaFont('modern 12')
        The font in which to render the title
    title_color : color ('color_name' or (red, green, blue, [alpha]) tuple)
        The color in which to render the title
    tick_weight : float
...</pre>
</div>
<p>If you have a plot in a state that you are happy with, you can save the current
image with the <tt class="docutils literal"><span class="pre">save()</span></tt> command:</p>
<div class="highlight-python"><pre>In [45]: save('my_plot.png')</pre>
</div>
</div>
<div class="section" id="log-plots-and-time-series">
<h2>Log Plots and Time-Series<a class="headerlink" href="#log-plots-and-time-series" title="Permalink to this headline">¶</a></h2>
<p>The Chaco ipython shell can create plots with logarithmic axes.  If you know at the time
that you create the plot that you want log axes, you can use one of the commands
<tt class="docutils literal"><span class="pre">semilogx()</span></tt>, <tt class="docutils literal"><span class="pre">semilogy()</span></tt> or <tt class="docutils literal"><span class="pre">loglog()</span></tt> as you would the usual <tt class="docutils literal"><span class="pre">plot()</span></tt> command:</p>
<div class="highlight-python"><pre>In [46]: x = linspace(0, 10, 101)
In [47]: y = exp(x**2)
In [48]: semilogy(x, y)</pre>
</div>
<p>If you have already created a plot, and you decide that it would be clearer with a
logarithmic scale on an axis, you can set this with the <cite>xscale()</cite> and <cite>yscale()</cite>
commands:</p>
<div class="highlight-python"><pre>In [49]: xscale('log')</pre>
</div>
<p>You can set it back to a linear scale in the same way:</p>
<div class="highlight-python"><pre>In [50]: xscale('linear')</pre>
</div>
<p>Time axes are handled in a similar way.  Chaco expects times to be represented as
floating point numbers giving seconds since the epoch, the same as <tt class="docutils literal"><span class="pre">time.time()</span></tt>.
Given a plot with a set of index values expressed as times in this fashion, you
can specify the scale as <tt class="docutils literal"><span class="pre">'time'</span></tt> and Chaco will display tick marks on the axis
appropriately:</p>
<div class="highlight-python"><pre>In [51]: x = linspace(time.time(), time.time()+7*24*60*60, 360)
In [52]: y = random.uniform(size=360)
In [53]: plot(x, y)
In [54]: xscale('time')</pre>
</div>
</div>
<div class="section" id="plot-management">
<h2>Plot Management<a class="headerlink" href="#plot-management" title="Permalink to this headline">¶</a></h2>
<p>In addition to the <tt class="docutils literal"><span class="pre">hold()</span></tt> command discussed earlier, there are several commands
that you can use to control the creation of new Chaco windows for plotting in to,
and determining which one is currently active:</p>
<div class="highlight-python"><pre>In [55]: figure('fig2', 'My Second Plot')</pre>
</div>
<p>creates a new window with the identifier <tt class="docutils literal"><span class="pre">'fig2'</span></tt> which will have &#8220;My Second Plot&#8221;
displayed as the title of the window.  Any new plots after this command will appear
in this window.  You can switch to an existing window using the <tt class="docutils literal"><span class="pre">activate()</span></tt> command,
referring to the window either by index or name:</p>
<div class="highlight-python"><pre>In [56]: activate(0)</pre>
</div>
<p>will make the original plot window the current window, while:</p>
<div class="highlight-python"><pre>In [57]: activate('fig2')</pre>
</div>
<p>will switch back to our second window.</p>
<p>For advanced users, you can get a reference to the current Chaco plot object using the
<tt class="docutils literal"><span class="pre">curplot()</span></tt> command.  When you have this, you then have full access to the programatic
Chaco plot API described elsewhere.</p>
<p>Finally, you can use the <tt class="docutils literal"><span class="pre">chaco.shell</span></tt> API from Python scripts instead of interactively
if you prefer.  In this case, because you do not have ipython around to set up the GUI
mainloop with the <tt class="docutils literal"><span class="pre">--gui=wx</span></tt> option, you need to use the <tt class="docutils literal"><span class="pre">show()</span></tt>
command to start the GUI mainloop and display the windows that you have created.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="guiqt" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Starting from IPython 0.12, it is possible to use the Qt backend
with <tt class="docutils literal"><span class="pre">--gui=qt</span></tt>. Make sure that the environment variable <tt class="docutils literal"><span class="pre">QT_API</span></tt>
is set correctly, as described <a class="reference external" href="http://ipython.org/ipython-doc/dev/interactive/reference.html?highlight=qt_api#pyqt-and-pyside">here</a></td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/e-logo-rev.png" alt="Logo"/>
            </a></p>
<h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Exploring Chaco with IPython</a><ul>
<li><a class="reference internal" href="#basic-usage">Basic Usage</a></li>
<li><a class="reference internal" href="#types-of-plots">Types of Plots</a></li>
<li><a class="reference internal" href="#making-things-pretty">Making Things Pretty</a></li>
<li><a class="reference internal" href="#log-plots-and-time-series">Log Plots and Time-Series</a></li>
<li><a class="reference internal" href="#plot-management">Plot Management</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/user_manual/tutorial_ipython.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="../index.html">chaco 4.6.0-dev documentation</a> &raquo;</li>
  
    <li><a href="#">Exploring Chaco with IPython</a></li>
  

      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2014, Enthought, Inc..
      Last updated on Nov 05, 2014.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>